TKYTEL COMMENT S1
                                                            百合子設計局
                                    局長 市川ゆり子 <dmarc@yuriko.co.nz>
                                                              2026-01-12

                       始末書
                （MKN局のWebSocketサーバを破壊しました）

1. はじめに
    ｻｰｾﾝ

2. 概要

    「ゆれを観測する」のWebSocketサーバに任意波形を突っ込んでイタズラしたいと思い、PoCコードを執筆＆デバッグしていたところ、CloudFlareが攻撃と検知したようで、サービス不能状態に陥った。またサーバに過大な負荷をかけた。

3. 原因

    PoCということもあり動作確認を優先するため、送出パケットレートの制限をかけていなかった。また、PoCコードを実行していたマシンの性能が想像以上に強力で、wait() のないビジーループを超高速で回してしまい、秒間数千パケット、累計数万～数十万パケットが送出された。

4. 発生した被害

    * サーバのサービス提供不能
    * サーバ管理者による再起動等による復旧作業
    * 送信元IP 18.180.10.83 のBAN
    * 停止したサーバを参照していた他サービス yurecollect.yude.jp.eu.org の停止
    * サーバへの過大な負荷

当時の負荷状況(みかんちゃん提供)
```
$ uptime
 00:11:01 up 50 days,  3:54,  2 users,  load average: 2.13, 1.56, 0.90
```

5. 処置

    * 始末書(本書)の提出
    * 関係各所への詫び石配布（ぉ
    * 大量パケット着弾に耐えられるWebSocketサーバ(yureサーバ？)の設計・開発（ぇ

6. 対策

    PoCコードとは言え、外部へ与える影響をよく考慮してコーディングする。特に高性能マシンで wait() のないビジーループを回さないように気を付ける。また可能ならPoCコードは閉じた環境で実行し、外部への影響をなくす。

7. 幸運

    最近書き慣れているPython(遅い)で開発していたため、秒間数千パケット程度のレートで収まった。ほかの高速な言語で書いていたらより大量のパケットを送出することができるので、被害が拡大していたかもしれない。

    サーバ代をケチるため AWS EC2 の最小性能インスタンス t3a.nano 上での実行だった。商用環境などでよく使われる m4.xlarge 上だったら秒間100万パケットを投げていたかもしれない。

8. まとめ

    超うっかりしていた。ちゃんとする。

    (サーバが)「ある」のがいけない!!! 「ある」のがいけない!!!（ｺﾗ

9. 参照

  [xxxx]: サーバ側死亡時の管理者によるツイート
          <https://discord.com/channels/1347594081869500477/1347594082326810718/1459941681481777273>

                                                                    以上
