TKYTEL COMMENT XX (DRAFT)
                                                          東京広域電話網
                                                              2026-01-XX

                   Tailscale を用いた局間接続における
                 片方向通信の原因及びその解消法について

1. はじめに

  ¶ 東京広域電話網では局間接続に tailscale がしばしば用いられていること
  - たびたび片方向通信となること

  ¶ この解決は tailscale 上で IPv4 アドレスを書き換えることによること
  - この方法は通常推奨されるものではないこと

2. 状況の説明

  ¶ 東京広域電話網では局間接続に tailscale がしばしば用いられていること
  - Tailscale についての簡単な説明

  ¶ Tailscale を用いた局間接続において、たびたび片方向通信となること
  - 片方向通信となる事象については、2025-05 時点で確認があったこと
  - 特に接続数が多い局（yude 及び MikaNeTEL）で発生しがちなこと

  ¶ SIP による通信こそ成功すれ、RTP による通信が失敗していること
  - つまり、発呼や着信は可能であるものの、通話はできないこと

3. 解決方法

  ¶ 解決するための手順をのべること
  0. 発呼はできるが、通話できないこと
  1. まず、両端の IPv4 アドレスの異なることを確認すること
  2. tailscale の admin console から IPv4 アドレスを編集すること
  3. 必要に応じて、provider の設定を変更すること

4. 今後の展望

  ¶ わかっていること:
    - 既に通信できている場合において
      IPv4 アドレスを編集して仲違いをさせようとしても当該事象は発生しないこと
    - 静的 IPv4 アドレスを編集する作業を IPv4 の静的なルーティングによって置き換えられないこと

  ¶ 当該手法の問題点
    - 相手の掲げる IPv4 アドレスが自 tailnet で既に利用中の場合、
      かつ、そのアドレスを解放できない場合、万策尽きること
    - そもそも、なぜこのようなことが起きるのかわからないこと

5. 参考

  - オレオレ IP 電話網を大きくしたら Tailscale の不具合ワナを踏み抜いて発狂した話
    エンジニア作業飲み集会 #125, 2025-05-16
    スライド資料: 2025-05-16-0-slide.pdf
    GitHub リポジトリ: KusaReMKN/slide-20250516
    YouTube アーカイブ: オレオレIP電話網を大きくしたらTailscaleのワナを踏み抜いて発狂した話 [エンジニア作業飲み集会@2025/05/16]
  - Scura @ 旧折衝部 https://discord.com/channels/1347594081869500477/1368818316000493620
